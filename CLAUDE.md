# 日程管理システム - 開発メモ

## システム概要
縦型カレンダーベースの日程管理システム。9人の担当者ごとに日程を管理し、特拡（特別拡張作戦）の登録・管理も可能。

## 主要機能

### 1. カレンダー表示
- **縦型レイアウト**: 日付が縦1列に表示
- **動的担当者数**: デフォルト9人、最大20人まで追加可能
- **レスポンシブ対応**: iOS/Android/PC対応
- **モバイル最適化**: 1画面で全体表示（スクロールなし）

### 2. 担当者管理
- カレンダー上部に担当者名入力欄（9〜20人）
- **担当者追加**: ＋ボタンで担当者を追加（最大20人）
- **担当者削除**: ×ボタンで担当者を削除（最小1人）
- **アンドゥ機能**: 「← 元に戻す」ボタンで操作を取り消し（最大10回）
- 担当者名を入力後、各セルクリックで日程入力可能

### 3. 日程管理機能
- **直接入力**: カレンダーセルをクリックして直接入力
- **色選択**: 8色から選択可能
  - 東販連（薄い紫: #E1BEE7）
  - 東部（水色: #81D4FA）
  - 中央（薄い黄色: #FFF9C4）
  - 城南（ピンク: #F8BBD0）
  - 城北（オレンジ: #FFCC80）
  - 多摩（薄い赤: #FFCDD2）
  - 埼玉（薄茶色: #D4A5A5）
  - その他（黄緑: #C8E6C9）
  - なし（透明）
- **備考追加**: 各日程に備考を追加可能（カレンダーに表示）
- **編集/削除**: 既存日程クリックで編集モーダル表示
- **文字サイズ自動調整**: 長文の場合は自動的に文字サイズを縮小

### 4. 特拡（特別拡張作戦）管理
- **特拡の種類**:
  - 東販連（薄い紫: #E1BEE7）
  - 東部作戦（水色: #81D4FA）
  - 中央作戦（薄い黄色: #FFF9C4）
  - 城南作戦（ピンク: #F8BBD0）
  - 城北作戦（オレンジ: #FFCC80）
  - 多摩作戦（薄い赤: #FFCDD2）
  - その他（黄緑: #C8E6C9）
- **参加メンバー管理**: 白木、境野、担当者、その他から選択
- **一括選択機能**: その他以外を一括選択
- **備考欄**: 特拡ごとにメモを追加
- **参加人数表示**: 自動で人数をカウント

### 5. 特拡表示ルール
- 特拡がある日は特拡情報のみ表示（通常の日程欄は非表示）
- 特拡の色が背景色として表示
- 参加メンバーと備考が表示される

## ファイル構成
```
C:\Users\user\OneDrive\デスクトップ\日程システム\
├── index.html       # メインHTML
├── script.js        # JavaScript（メイン処理）
├── styles.css       # スタイルシート
└── CLAUDE.md        # このファイル（開発メモ）
```

## データ保存
- localStorage使用
- 以下のデータを保存:
  - `scheduleEvents`: 全イベントデータ
  - `staffMembers`: 9人の担当者名

## イベントデータ構造
```javascript
{
  id: タイムスタンプ,
  title: "イベントタイトル",
  date: "YYYY-MM-DD",
  time: "HH:MM",
  person: "担当者名",
  description: "詳細",
  color: "#色コード or transparent",
  note: "備考",
  isCampaign: true/false,
  campaignMembers: ["メンバー配列"],
}
```

## 最近の更新内容（2025-01-18）

1. **担当者管理機能の拡張**
   - 動的な担当者追加（最大20人）・削除（最小1人）機能
   - アンドゥ機能（最大10回まで操作を取り消し可能）
   - 削除時の確認ダイアログ

2. **印刷機能の最適化**
   - A4横向き1ページに収まるレイアウト
   - 文字の濃さを改善（font-weight: bold、色を#000に）
   - フォントサイズ調整（5pt→6pt、4pt→5pt）
   - 特拡の日を1行表示に変更

3. **表示の改善**
   - 日程を枠の中央に表示
   - 備考をタイトルの下に表示（YC名表記）
   - 長文時の文字サイズ自動調整（3段階）
   - 埼玉色を追加（#D4A5A5）

4. **モバイル対応強化**
   - 1画面で全体表示（スクロールなし）
   - 文字サイズを最小化
   - 不要な要素を非表示

5. **特拡機能の改善**
   - 特拡登録ボタン横に備考欄追加
   - 特拡の日の備考も1行で表示

## 注意事項
- 特拡がある日は通常の日程入力不可
- 担当者名未入力の場合は日程入力不可
- データはブラウザのlocalStorageに保存（ブラウザごとに独立）

## 今後の課題・要望
- LINEからのアクセス対応（未実装）
- データのバックアップ/復元機能
- 年間カレンダー表示

## テスト手順
1. 担当者名を入力
2. カレンダーセルクリックで日程入力
3. 既存日程クリックで編集モーダル確認
4. 特拡登録ボタンから特拡登録
5. 色変更・備考追加の動作確認

## 開発者メモ
- script.jsの`ScheduleManager`クラスが主要ロジック
- モーダルは3種類: eventModal, scheduleEditModal, campaignEditModal
- イベントリスナーは`attachEventListeners()`でまとめて設定
- キャッシュ対策: `?v=時刻`のクエリパラメータ使用可能