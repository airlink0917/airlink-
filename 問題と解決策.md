# モバイル特拡表示の問題と解決策

## 現在の問題
モバイルで特拡（キャンペーン）の表示が正しくされない
- 文字サイズが大きいまま（作戦名、参加メンバー、備考）
- 文字が切れて表示される
- CSSの変更が反映されない

## 試した対策（すべて失敗）
1. モバイルメディアクエリ内の文字サイズ変更 → 反映されず
2. `!important` の追加 → 効果なし
3. CSSファイルにバージョン番号追加（キャッシュクリア） → 効果なし
4. メディアクエリを768px→1024pxに変更 → 効果なし
5. タイムスタンプでキャッシュクリア → 効果なし

## 根本原因の可能性
1. **別のCSSファイルが読み込まれている**
   - Vercelのビルド設定で別のファイルが優先されている
   - service workerがキャッシュしている

2. **インラインスタイルまたはJavaScriptで上書きされている**
   - DOMに直接スタイルが適用されている可能性
   - script.jsで動的に生成している部分に問題がある

3. **メディアクエリが正しく機能していない**
   - 別の場所に競合するCSSがある
   - CSSの記述順序に問題がある

## 次回の調査手順
1. **実際のHTML/CSSを確認**
   ```
   モバイルブラウザで開発者ツールを使用
   または、実際にレンダリングされているHTMLを確認
   ```

2. **特拡セル生成部分を確認**
   ```javascript
   script.js の renderCalendar() 関数
   特に .campaign-cell-wide, .campaign-info, .campaign-type, .campaign-members, .campaign-note
   を生成している部分
   ```

3. **インラインスタイルの確認**
   ```
   HTMLに style="" 属性が付いていないか
   これがあると !important でも上書きできない
   ```

4. **CSSの読み込み順序確認**
   ```
   index.html の <head> 内
   複数のCSSファイルが読み込まれていないか
   ```

## 推奨される解決策
### 方法1: インラインスタイルで強制適用
script.js でセルを生成する際に、直接 style 属性を追加する

### 方法2: より具体的なセレクタを使用
```css
@media (max-width: 1024px) {
    .calendar-grid .campaign-cell-wide .campaign-info .campaign-type {
        font-size: 9px !important;
    }
    .calendar-grid .campaign-cell-wide .campaign-info .campaign-members {
        font-size: 5px !important;
    }
    .calendar-grid .campaign-cell-wide .campaign-info .campaign-note {
        font-size: 5px !important;
    }
}
```

### 方法3: 過去の正常に動作していたバージョンに戻す
```bash
# 正常だったコミットを特定
git log --oneline --all

# そのコミットに戻す
git revert HEAD~10..HEAD
```

## 目標の文字サイズ（モバイル）
- 作戦名: 9px
- 参加メンバー: 5px
- 備考: 5px
- セルの高さ: auto（内容に応じて自動調整）

## 現在のコード状態
- index.html: CSS読み込み `styles.css?v=1759995999`
- styles.css: 1083-1104行目にモバイル設定あり（@media max-width: 1024px内）
- メディアクエリは874-1111行で定義
